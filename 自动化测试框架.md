# 自动化测试框架

## 一、为何采用自动化测试工具

### 1.传统测试存在的问题

1.每个测试都要重新启动Spring，启动容器的开销大，测试效率低下

2.不应该是测试代码管理Spring容器，应该是Spring容器在管理测试代码

3.不能正常关闭Spring容器，Spring容器生命周期非正常退出

4.黑盒测试回归效率低

5.手动测试的偶然性和不确定性

6.回归的覆盖率不足

7.交付的产品质量无法保证，全靠评估

8.系统越复杂，问题越多

9.上线时间长、构件失败率高导致的蝴蝶效应



## 二、典型类型的软件自动化测试框架

###### 1．模块化测试框架

 >​    模块化测试脚本框架（TEST MODulARITY FRAMEWORK）需要创建小而独立的可以描述的模块、片
 >断以及待测应用程序的脚本。这些树状结构的小脚本组合起来，就能组成能用于特定的测试用例的脚本。
 >
 >​         在五种框架中，模块化框架是最容易掌握和使用的。在一个组件上方建立一个抽象层使其在余下
 >的应用中隐藏起来，这是众所周知的编程技巧。这样应用同组件中的修改隔离开来，提供了程序设计
 >的模块化特性。模块化测试脚本框架使用这一抽象或者封装的原理来提高自动测试组合的可维护性和可
 >升级性。  



###### 2.测试库框架

>测试库框架（Test Library Architecture）与模块化测试脚本框架很类似，并且具有同样的优点。不
>同的是测试库框架把待测应用程序分解为过程和函数而不是脚本。这个框架需要创建描述模块、片
>断以及待测应用程序的功能库文件。



###### 3.关键字驱动或表驱动的测试框架

>对于一个独立于应用的自动化框架，关键字驱动（KEYWORD DRIVEN）I9LJJ试和表驱动（TABLE D
>RIVEN）测试是可以互换的术语。这个框架需要开发数据表和关键字。这些数据表和关键字独立于
>执行它们的测试自动化工具，并可以用来“驱动＂待测应用程序和数据的测试脚本代码，关键宇驱动
>测试看上去与手工测试用例很类似。在一个关键字驱动测试中，把待测应用程序的功能和每个测试
>的执行步骤一起写到一个表中。
>
>这个测试框架可以通过很少的代码来产生大量的测试用例。同样的代码在用数据表来产生各个测试
>用例的同时被复用。



###### 4.数据驱动测试框架

>  数据驱动（DATA DRIVEN），LJ试是一个框架。在这里测试的输入和输出数据是从数据文件中读取
>（数据池，ODBC源，CSV文件，EXCEL文件，ADO对象等）并且通过捕获工具生成或者手工生成
>的代码脚本被载入到变量中。在这个框架中，变量不仅被用来存放输入值还被用来存放输出的验证
>值。整个程序中，测试脚本来读取数值文件，记载测试状态和信息。这类似于表驱动测试，在表驱
>动测 试中，它的测试用例是包含在数据文件而不是在脚本中，对于数据而言，脚本仅仅是一个“驱
>动器”，或者是一个传送机构。然而，数据驱动测试不同于表驱动测试，尽管导航数据并不包含在
>表结构中。在数据驱动测试中，数据文件中只包含测试数据。
>
>这个框架意图减少需要执行所有测试用例所需要的总的测试脚本数。数据驱动需要很少的代码来产
>生大量的测试用例，这与表驱动极其类似。  

######  5．混合测试自动化（Hybrid Test Automation）框架

> 最普遍的执行框架是上面介绍的所有技术的一个结合，取其长处，弥补其不足。这个混合测试
>框架是由大部分框架随着时间并经过若干项目演化而来的



## 三、自动化测试框架所具备的功能

>Log：日志记录和管理功能，针对不同的情况，设置不同的日志级别，方便定位问题；
>
>Report：测试报告生成和管理以及即时通知，测试结果快速响应；
>
>Source：配置文件、静态资源的管理，遵循高内聚低耦合原则；
>
>Common：公共函数、方法以及通用操作的管理，遵循高内聚低耦合原则；
>
>TestCase：测试用例管理功能，一个功能点对应一个或者多个case，尽可能的提高覆盖率；
>
>TestData：测试数据管理功能，数据与脚本分离，降低维护成本，提高可移植性；
>
>TestSuite：测试组件管理功能，针对不同场景不同需求，组装构建不同的测试框架，遵循框架的灵活性和扩展性；
>
>Statistics：测试结果统计管理功能，每次执行测试的结果统计、分析、对比以及反馈，数据驱动，为软件优化和流程改进，提供参考；
>
>Continuous：持续集成环境，即CI环境，包括测试文件提交、扫描编译、执行测试、生成报告及时通知等功能，**持续集成是自动化测试的核心**！



## 四、开源测试框架

## Selenium 浏览器自动化测试框架

>Selenium  是一个用于Web应用程序测试的工具。Selenium测试直接运行在浏览器中，就像真正的用户在操作一样。支持的浏览器包括IE（7, 8, 9, 10, 11），[Mozilla Firefox](https://baike.baidu.com/item/Mozilla Firefox/3504923)，Safari，Google Chrome，Opera等。这个工具的主要功能包括：测试与浏览器的兼容性——测试你的应用程序看是否能够很好得工作在不同浏览器和操作系统之上。测试系统功能——创建回归测试检验软件功能和用户需求。支持自动录制动作和自动生成 .Net、Java、Perl等不同语言的测试脚本。

**功能：**

>- 框架底层使用JavaScript模拟真实用户对浏览器进行操作。测试脚本执行时，浏览器自动按照脚本代码做出点击，输入，打开，验证等操作，就像真实用户所做的一样，从终端用户的角度测试应用程序。
>- 使浏览器兼容性测试自动化成为可能，尽管在不同的浏览器上依然有细微的差别。
>- 使用简单，可使用Java，Python等多种语言编写用例脚本。

据 Selenium 主页所说，与其他测试工具相比，使用 Selenium 的最大好处是：

> Selenium 测试直接在浏览器中运行，就像真实用户所做的一样。Selenium 测试可以在 Windows、Linux 和 Macintosh上的 Internet Explorer、Chrome和 Firefox 中运行。其他测试工具都不能覆盖如此多的平台。使用 Selenium 和在浏览器中运行测试还有很多其他好处。

**组件:**

>- Selenium IDE：一个Firefox插件，可以录制用户的基本操作，生成测试用例。随后可以运行这些测试用例在浏览器里回放，可将测试用例转换为其他语言的自动化脚本。
>- Selenium Remote Control (RC) ：支持多种平台(Windows，Linux，Solaris)和多种浏览器(IE，Firefox，Opera，Safari)，可以用多种语言(Java，Ruby，Python，Perl，PHP，C#)编写测试用例。
>- Selenium Grid ：允许Selenium-RC 针对规模庞大的测试案例集或者需要在不同环境中运行的测试案例集进行扩展。

## Selendie

> 由Selenium提供的Selenide，可用作为Java应用程序编写稳定、精确且具有友好UI的测试用例。如今，针对Ajax之类Web技术的测试工具日趋复杂，动辄便会出现超时的问题。而Selenide却能够以简单的方式处理该问题。Selenide简单易学，您无需搜索任何相关教程，只需专注于业务逻辑，便可通过几行简单的代码来搞定工作。

**使用Selenide的先决条件**

Selenide的安装非常简单。如果您使用的是Maven，则只需要在pom.xml文件中添加如下代码行：

1. com.codeborne selenide 5.1.0 test 

   

**Selenide的优点**

>在测试人员处理那些由Java编写的前端应用时，往往会碰到超时的问题。也许您当前编写的测试用例尚能正常工作。而几天之后，随着某些Ajax请求的增多，相应的JavaScript的运行则可能会慢下来。此外，如果您的系统还同时运行着另一个进程的话，这些都会导致测试用例的失败。您与其花上几天时间去寻找问题的根源，不如让Selenide从如下方面帮助您：
>
>- 简洁的测试用例编写过程，消除了超时的问题。
>- 能够测试由AngularJS所开发的应用程序。
>- 减少了各种传统Selenium工具中的大量命令。

WebDriver虽然是UI测试的流行工具，但是它无法解决由Ajax超时、JavaScript运行缓慢、以及加载动态内容耗时等一系列问题。过去，我们在测试用例中使用的是“wait_until”或“sleep”方法。如今有了Selenide，我们只要关注业务逻辑便可。可以说，就UI测试而言，除了Selenium WebDriver(Selenide的父框架)，没有比它更好的Java框架了。

## **Serenity**

Serenity同样是一种能被用于行为驱动测试的开源库。该框架可帮助您编写出各种结构良好、且易于维护的验收标准。它在一定程度上扩展了JUnit和WebDriver的功能。

**安装:**

>由于该框架基于Java，因此您显然需要具备Java、或其他任何面向对象编程语言的知识与经验。此外，您的电脑上还需要有：
>
>
>
>- JDK 5或更高版本。
>- Maven 3.0或更高版本。
>- 由于Maven和Eclipse的组合更易于使用，因此作为IDE工具的Eclipse通常是所有开发人员首选的。

**优点:**

>针对行为驱动测试，Serenity具有如下优点：
>
>
>
>- 该框架能够帮助测试人员创建各种REST服务的测试用例。
>- 用户不必花费大量的时间，来维护或构建自己的自动化框架。
>- 它能够在定义、理解测试用例、以及实现方式建立平衡。
>- 它可以与许多自动化框架相集成，其中包括：Selenium、JBehave、基于Java的高级开发框架(如Spring)、甚至是JIRA之类的持续集成工具。
>
>与JBehave类似，Serenity的唯一缺点便是：为了充分发挥其支持行为驱动开发的完整功能，项目参与者需要保持彼此之间的沟通。

由于主要被用于报告验收的标准，因此使用Serenity所写出的报告，比JBehave等其他BDD框架具有更丰富信息量。同时，它还可以帮助开发人员编写出更高质量的自动化测试用例场景。另外，它能够为RestAssured和Selenium WebDriver提供支持，使得测试人员能够更快、更简便地写出基于验收测试标准的自动化用例。

## TestNG

### 支持测试类型

单元测试

集成测试

### 优点

1. 可以实现数据驱动、多线程并发执行测试用例。 
2. 参数化，可以从XML、Excel、JSON中获取数据。
3. 可以生成测试报告，可以进行二次开发。
4. 可指定执行顺序， dependsOnMethods 属性来应对测试的依赖性问题。
5. Testng如果有测试方法出错可以返回只执行错误的测试方法，junit需要全部重新执行.
6. TestNG使用Java和面向对象的功能
7. 支持综合类测试（例如，默认情况下，没有必要创建一个新的测试每个测试方法的类的实例）
8. 独立的编译时间测试代码运行时配置/数据信息
9. 灵活的运行时配置
10. 主要介绍“测试组”。当编译测试，只要问TestNG运行所有的“前端”的测试，或“快”，“慢”，“数据库”等
11. 支持依赖测试方法，并行测试，负载测试，局部故障
12. 灵活的插件API

### 缺点

1. 底层调用的依然是JUnit。
2. 对于JUnit实现的assert完成的不是很好，需要书写静态类来实现。但是TestNG也是可以使用断言的。

### 使用环境/应用场景

TestNG比较适合更加完整大型的项目测试用例，而junit比较适合开发人员自己拿来测试方法比较方便。

### 其他 

SOFAACTS 底层是基于TestNG的。

## JBehave

### 支持测试类型

验收测试

### 优点

- 纯Java编写
- 支持任何语言编写story
- 支持URL传入story
- 支持各种文档已经能够生成很不错的测试报告

### 缺点

- 只支持故事，不支持功能

### 备注

不适合作为后端测试框架。

## SOFAActs

### 支持测试类型

### 优点

- 能够进行精细化的白盒测试
- 可视化编辑界面，可以省去大部分手工编写代码的工作
- 简易的初始化
- 快速生成测试脚本
- 快速生成数据模型

